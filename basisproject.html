<html>
<head>
    <script defer src="https://unpkg.com/alpinejs@3.5.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="style/style.css">
    <meta charset="UTF-8">
    <title>basisProject</title>
    <html lang="en">
</head>

<body>

    <!-- give random GPU -->
    <div x-data="{
        responsedata: null,
        async getData() {
            this.responsedata = await (await fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs/random')).json();
        }
    }">
    <button x-on:click="getData">random GPU</button>
    Data returned: <strong x-text="responsedata.name">Placeholder</strong>
    </div>

    <hr>

    <!-- show all GPUs -->
    <div x-data="{
        responsedata: [],
        async getGPUs() {
            fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs')
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <button type="button" @click="getGPUs"> show all GPUs</button>
    <ul>
        <template x-for="GPU in responsedata">
            <li>
                <p> name: </p>
                <p x-text="GPU.name"></p>
                <p> price:  </p>
                <p x-text="GPU.price"></p>
                <p> memory : </p>
                <p x-text="GPU.memory"></p>
                <span> power:  </span>
                <p x-text="GPU.power"></p>
            </li>
        </template>
    </ul>
    </div>
    
    <hr>

    <!-- search by name -->
    <div x-data="{
        responsedata: [],
        name : '',
        async getName() {
            fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs/?name=' + this.name)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="name" placeholder="search by name">
    <button type="button" @click="getName"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- search by price -->
    <div x-data="{
        responsedata: [],
        price : '',
        async getPrice() {
            fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs/price/?price=' + this.price)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="price" placeholder="search by price">
    <button type="button" @click="getPrice"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>
    
    <!-- search by power -->
    <div x-data="{
        responsedata: [],
        power : '',
        async getPower() {
            fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs/power/?power=' + this.power)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="power" placeholder="search by power">
    <button type="button" @click="getPower"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- search by memory -->
    <div x-data="{
        responsedata: [],
        memory : '',
        async getmemory() {
            fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/GPUs/memory/?memory=' + this.memory)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="memory" placeholder="search by memory">
    <button type="button" @click="getmemory"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- add GPU to list -->
    <div class="card-body">
        <p class="card-text">add a GPU to the list</p>
        <div x-data="{
          responsedata: null,
          name: '',
          price: '',
          memory: '',
          power: '',
          async addGPU() {
            this.responsedata = await (await fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/add/?name=' + this.name + '&price=' + this.price + '&memory=' + this.memory + '&power=' + this.power, {
              method: 'POST',
            })).json();
          },
        }">
          <input type="text" x-model="name">
          <input type="text" x-model="price">
          <input type="text" x-model="memory">
          <input type="text" x-model="power">
          <button class="btn btn-primary" x-on:click="addGPU">add GPU</button>
          <p class="api-output"> GPU added to the list : 
              <span x-text="responsedata.name"></span>
              <span x-text="responsedata.price"></span>
              <span x-text="responsedata.memory"></span>
              <span x-text="responsedata.power"></span>
          </p>
          </ul>
        </div>
    </div>
      <hr>
    
      <!-- update GPU to list -->
    <div class="card-body">
        <p class="card-text">update a GPU in the list</p>
        <div x-data="{
          responsedata: null,
          name: '',
          price: '',
          memory: '',
          power: '',
          async updateGPU() {
            this.responsedata = await (await fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/update/?name=' + this.name + '&price=' + this.price + '&memory=' + this.memory + '&power=' + this.power, {
              method: 'PUT',
            })).json();
          },
        }">
          <input type="text" x-model="name">
          <input type="text" x-model="price">
          <input type="text" x-model="memory">
          <input type="text" x-model="power">
          <button class="btn btn-primary" x-on:click="updateGPU">update GPU</button>
          <p class="api-output"> GPU updated in the list : 
              <span x-text="responsedata.name"></span>
              <span x-text="responsedata.price"></span>
              <span x-text="responsedata.memory"></span>
              <span x-text="responsedata.power"></span>
          </p>
        </div>
    </div>

      <hr>

      <!-- delete GPU out of list -->
      <div x-data="{
          responsedata: [],
          name : '',
            async deleteGPU() {
                this.responsedata = await (await fetch('https://basisproject-service-thibaudwagemans.cloud.okteto.net/delete/?name=' + this.name, {
                  method: 'delete',
                })).json();
          }
      }">
      <input type="text" x-model="name" placeholder="delete by name">
      <button type="button" @click="deleteGPU"> delete</button>
      <ul>
          <template x-for="i in responsedata">
              <li x-text="i"></li>
          </template>
      </ul>
      </div>

</body>

</html>
