<html>
<head>
    <script defer src="https://unpkg.com/alpinejs@3.5.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="style/style.css">
    <meta charset="UTF-8">
    <title>basisProject</title>
    <html lang="en">
</head>

<body>

    <!-- give random GPU -->
    <div x-data="{
        responsedata: null,
        async getData() {
            this.responsedata = await (await fetch('http://127.0.0.1:8000/GPUs/random')).json();
        }
    }">
    <button x-on:click="getData">random GPU</button>
    Data returned: <strong x-text="responsedata.name">Placeholder</strong>
    </div>

    <hr>

    <!-- show all GPUs -->
    <div x-data="{
        responsedata: [],
        async getGPUs() {
            fetch('http://127.0.0.1:8000/GPUs')
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <button type="button" @click="getGPUs"> search</button>
    <ul>
        <template x-for="GPU in responsedata">
            <li>
                <p> name: </p>
                <p x-text="GPU.name"></p>
                <p> price:  </p>
                <p x-text="GPU.price"></p>
                <p> memory : </p>
                <p x-text="GPU.memory"></p>
                <span> power:  </span>
                <p x-text="GPU.power"></p>
                <hr>

            </li>

            
        </template>
    </ul>
    </div>
    
    <hr>

    <!-- search by name -->
    <div x-data="{
        responsedata: [],
        name : '',
        async getName() {
            fetch('http://127.0.0.1:8000/GPUs/?name=' + this.name)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="name" placeholder="search by name">
    <button type="button" @click="getName"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- search by price -->
    <div x-data="{
        responsedata: [],
        price : '',
        async getPrice() {
            fetch('http://127.0.0.1:8000/GPUs/price/?price=' + this.price)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="price" placeholder="search by price">
    <button type="button" @click="getPrice"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>
    
    <!-- search by power -->
    <div x-data="{
        responsedata: [],
        power : '',
        async getPower() {
            fetch('http://127.0.0.1:8000/GPUs/power/?power=' + this.power)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="power" placeholder="search by power">
    <button type="button" @click="getPower"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- search by memory -->
    <div x-data="{
        responsedata: [],
        memory : '',
        async getmemory() {
            fetch('http://127.0.0.1:8000/GPUs/memory/?memory=' + this.memory)
                .then(response => response.json())
                .then(data => {
                    this.responsedata = data;
                    console.log('responsedata:',this.responsedata);
                });
        }
    }">
    <input type="text" x-model="memory" placeholder="search by memory">
    <button type="button" @click="getmemory"> search</button>
    <ul>
        <template x-for="i in responsedata">
            <li x-text="i"></li>
        </template>
    </ul>
    </div>

    <hr>

    <!-- add GPU to list -->
    <div class="row">
        <div class="col-sm">
          <div class="card">
            <div class="card-body">
              <hr>
              <p class="card-text">add a GPU to the list</p>
              <div x-data="{
                responsedata: null,
                name: '',
                price: '',
                memory: '',
                power: '',
                async postquote() {
                  this.responsedata = await (await fetch('http://127.0.0.1:8000/add/?name=' + this.name + '&price=' + this.price + '&memory=' + this.memory + '&power=' + this.power, {
                    method: 'POST',
                    body: JSON.stringify({
                    content: this.postcustomquote,
                    body: 'bar',
                  }),
                  headers: {
                    'Content-type': 'application/json; charset=UTF-8',
                  },
                  })).json();
                },
              }">
                <input type="text" x-model="name">
                <input type="text" x-model="price">
                <input type="text" x-model="memory">
                <input type="text" x-model="power">
                <button class="btn btn-primary" x-on:click="postquote">add GPU</button>
                <p class="api-output"> GPU added to the list : 
                    <span x-text="responsedata.name"></span>
                    <span x-text="responsedata.price"></span>
                    <span x-text="responsedata.memory"></span>
                    <span x-text="responsedata.power"></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    
    
      <!-- update GPU to list -->
      <div class="row">
        <div class="col-sm">
          <div class="card">
            <div class="card-body">
              <hr>
              <p class="card-text">add a GPU to the list</p>
              <div x-data="{
                responsedata: null,
                name: '',
                price: '',
                memory: '',
                power: '',
                async postquote() {
                  this.responsedata = await (await fetch('http://127.0.0.1:8000/add/?name=' + this.name + '&price=' + this.price + '&memory=' + this.memory + '&power=' + this.power, {
                    method: 'POST',
                    body: JSON.stringify({
                    content: this.postcustomquote,
                    body: 'bar',
                  }),
                  headers: {
                    'Content-type': 'application/json; charset=UTF-8',
                  },
                  })).json();
                },
              }">
                <input type="text" x-model="name">
                <input type="text" x-model="price">
                <input type="text" x-model="memory">
                <input type="text" x-model="power">
                <button class="btn btn-primary" x-on:click="postquote">add GPU</button>
                <p class="api-output"> GPU added to the list : 
                    <span x-text="responsedata.name"></span>
                    <span x-text="responsedata.price"></span>
                    <span x-text="responsedata.memory"></span>
                    <span x-text="responsedata.power"></span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>



</body>

</html>
